//
// Readspeaker styling.
//
// We're overriding Admin menu CSS, skip some validation.
// sass-lint:disable no-important no-ids id-name-format class-name-format
$rs-bg-color: #f6f6f6;
$rs-btn-color: #2c3f48;
$rs-divider-color: #ddeaed;
$rs-progressbar-color: #919da5;
$rs-progressbar-done-color: #2c3f48;
$rs-progressbar-handle-color: #f39200;

//
// Icon Font: readspeaker.
//

@font-face {
  // sass-lint:disable-block no-duplicate-properties
  font-family: 'readspeaker';
  src: url('#{$base-theme-path}/fonts/readspeaker.eot');
  src: url('#{$base-theme-path}/fonts/readspeaker.eot?#iefix') format('embedded-opentype'),
  url('#{$base-theme-path}/fonts/readspeaker.woff') format('woff'),
  url('#{$base-theme-path}/fonts/readspeaker.ttf') format('truetype'),
  url('#{$base-theme-path}/fonts/readspeaker.svg#readspeaker') format('svg');
  font-weight: normal;
  font-style: normal;
}

// Legacy exception. Needs documentations and condition of removal.
@media screen and (-webkit-min-device-pixel-ratio: 0) { // sass-lint:disable-line no-vendor-prefixes
  @font-face {
    font-family: 'readspeaker';
    src: url('#{$base-theme-path}/fonts/readspeaker.svg#readspeaker') format('svg');
  }
}

.icon-rs {
  @include icon-rs;
}

// Visually hide the readspeaker icon until the header image comes in.
@include mq($bp-tablet-s, 'max') {
  .readspeaker {
    position: absolute !important;
    clip: rect(1px, 1px, 1px, 1px);
    overflow: hidden;
    height: 1px;
  }
}

.readspeaker {
  position: absolute;
  right: $grid-margin * 1px;
  z-index: $z-gamma;
  bottom: 0;
  box-shadow: 0 0 21px -21px $dark-color;

  @include mq($bp-tablet-s) {
    right: $grid-margin * 2px;
  }

  &.v2 {
    // sass-lint:disable-block no-vendor-prefixes no-duplicate-properties
    top: .1em;
    right: 0;
    box-shadow: none;
    bottom: inherit;
    padding: 0 10px;
    height: 2.25em;
    background: $white-color;
    // Legacy, should we use compass gradient mixin?
    background: -moz-linear-gradient(left, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 20px, rgba(255, 255, 255, 1) 100%);
    background: -webkit-linear-gradient(left, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 20px, rgba(255, 255, 255, 1) 100%);
    background: linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 20px, rgba(255, 255, 255, 1) 100%);

    .rsbtn_gent {
      background: transparent;
      border-radius: inherit;
      padding: 0;

      .divider {
        height: 35px;
      }

      .rsbutton {
        width: 50px;
        height: 2em;
        line-height: 2.25em;
      }

      .rsexpanded {
        padding-right: 8px;
        background: transparent;
      }

      .rsbtn_progress_container {
        margin-top: 20px;
      }
    }
  }
}

.rsbtn_gent {
  @include clearfix;

  padding-left: 8px;
  padding-right: 8px;
  background: $white-color;

  &.rsexpanded {
    padding: 0;
    background: $rs-bg-color;
  }

  // General classes.
  a,
  span {
    position: relative;
    display: block;
    text-decoration: none;
  }

  .divider {
    width: 1px;
    height: 46px;
    background-color: $rs-divider-color;
    margin-top: 5px;
  }

  // All the player elements should float.
  .rspart {
    float: left;
  }

  .rsdefloat {
    clear: both;
  }

  // This goes for all buttons.
  .rsbutton {
    width: 48px;
    height: 58px;
    margin: 0;
    color: $rs-btn-color;
    fill: currentColor;
    text-align: center;
    vertical-align: middle;
    font-size: 20px;
    line-height: 58px;
    outline: none;
  }

  .rsbutton::before {
    @include icon-rs;
    color: $rs-btn-color;
    transition: color .35s ease;
  }

  .rsbutton:hover::before {
    color: lighten($rs-btn-color, 20);
  }

  // Hide all text labels. They will still be visible to non-CSS browsers.
  .rspart .rsbtn_btnlabel {
    display: none;
    font-weight: inherit;
    font-style: inherit;
    font-size: 100%;
    font-family: inherit;
  }

  // Listen button + icon.
  .rsbutton.rsbtn_play {
    float: left;
  }

  .rsbutton.rsbtn_play::before {
    @include icon-person-before; // sass-lint:disable-line placeholder-in-extend
    // Accommodate for the extra wide icon.
    margin-right: 16px;
  }

  &.rsexpanded .rsbutton.rsbtn_play::before {
    @include icon-back-before; // sass-lint:disable-line placeholder-in-extend
    // Accommodate for the extra wide icon.
    margin-right: 8px;
    margin-left: 16px;
  }

  // Expanding area.
  .rsbtn_exp.rsimg.rspart {
    background: none;
    float: left;
    display: none;
  }

  // We want the expanding area to be visible only when the player
  // is expanded, hence the .rsexpanded class.
  &.rsexpanded .rsbtn_exp.rsimg {
    display: block;
  }

  // Play/pauze button.
  .rsbutton.rsbtn_pause::before {
    @include icon-pauze-before; // sass-lint:disable-line placeholder-in-extend
  }

  &.rspaused .rsbutton.rsbtn_pause::before,
  &.rsstopped .rsbutton.rsbtn_pause::before {
    @include icon-play-before; // sass-lint:disable-line placeholder-in-extend
  }

  &.rsplaying .rsbutton.rsbtn_pause::before {
    @include icon-pauze-before; // sass-lint:disable-line placeholder-in-extend
  }

  // Stop button.
  .rsbutton.rsbtn_stop::before {
    @include icon-stop-before; // sass-lint:disable-line placeholder-in-extend
  }

  &.rsstopped .rsbutton.rsbtn_stop::before {
    color: lighten($rs-btn-color, 40);
  }

  // Progress container.
  .rsbtn_progress_container {
    border: 1px solid $rs-progressbar-color;
    width: 110px;
    height: 10px;
    margin-top: 24px;
    margin-left: 16px;
    margin-right: 16px;
    background-color: $rs-progressbar-color;
    border-radius: 3px;
  }

  // Progress drag handle.
  .rsbtn_progress_handle.rsimg {
    @include icon-rs;

    position: absolute;
    top: -17px;
    left: -17px;
    width: 40px;
    height: 40px;

    background-image: url('#{$base-theme-path}/img/png/rs-handle.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-color: transparent;
  }

  // Progress bar.
  .rsbtn_progress_played {
    position: absolute;
    height: 100%;
    background-color: $rs-progressbar-done-color;
  }

  // Volume button.
  .rsbutton.rsbtn_volume::before {
    @include icon-volume-before; // sass-lint:disable-line placeholder-in-extend
  }

  // Volume slider container.
  .rsbtn_volume_container {
    @include box-shadow(0 3px 7px -3px $dark-color);
    position: absolute;
    display: none;
    top: 100%;
    width: 58px;
    height: 100px;
    border: 0;
    background-color: $rs-bg-color;
    z-index: 100;
    border-radius: 0 0 $beta-radius $beta-radius;
    border-top: 1px solid $rs-divider-color;
  }

  // Volume slider area.
  .rsbtn_volume_slider {
    width: 12px;
    height: 80px;
    margin: 10px 23px;
    background: $rs-progressbar-color;
    border-radius: 3px;
  }

  // Volume slide handle
  .rsbtn_volume_handle.rsimg {
    position: absolute;
    top: -6px;
    left: -10px;
    width: 32px;
    height: 6px;
    background-color: $rs-progressbar-handle-color;
  }

  // Download button.
  .rsbutton.rsbtn_dl::before {
    @include icon-download-before; // sass-lint:disable-line placeholder-in-extend
  }

  // Settings button.
  .rsbutton.rsbtn_settings::before {
    @include icon-settings-before; // sass-lint:disable-line placeholder-in-extend
  }

  // Close button.
  .rsbutton.rsbtn_closer {
    background-color: $white-color;
    width: 64px;
    border-left: 1px solid $rs-divider-color;

    &::before {
      @include icon-close-before; // sass-lint:disable-line placeholder-in-extend
      @include icon-base-css;
      font-size: 2.25rem;
      margin-top: 3px;
      margin-left: 8px;
      // Accommodate for the extra wide icon
      margin-right: 16px;

      @at-root .rscompact#{&} {
        font-size: 1.9rem;
        margin: 0 0 0 3px;
      }
    }
  }

  // Popup button.
  // This is the style of the listen button that popups when the user
  // makes a text selection on the page.
  &.rspopup {
    @include box-shadow(0 3px 7px -3px $dark-color);
    position: absolute;
    display: none;
    border: 1px solid lighten($alpha-text-color, 40);
    border-radius: $beta-radius !important;
    background: $rs-bg-color;

    .divider {
      height: 26px;
      margin-top: 5px;
    }

    .rsbtn_progress_container {
      margin-top: 13px;
      width: 60px;
    }

    .rsbutton {
      width: 32px;
      height: 36px;
      font-size: 18px;
      line-height: 36px;

      &.rsbtn_closer {
        background-color: inherit;
      }

      &.rsbtn_play::before {
        margin-right: 11px;
      }
    }

    &.rsexpanded {
      .rsbutton.rsbtn_closer {
        margin-right: 11px;

        &::before {
          margin-top: 0;
        }
      }

      .rsbtn_play::before {
        margin-left: 6px;
      }
    }
  }
}

#rs_enlargeHL_box {
  font-family: $alpha-font-family;
  font-size: 2em !important;
}

// Overlay styles, make it all important to override inline RS stuff.
#rslightbox_contentcontainer {
  @include box-shadow(0 0 21px $dark-color);

  background-color: $gamma-ui-color !important;
  // Why not mixin text-dimensions()?
  font: $alpha-font-weight $alpha-font-size / 16 * 100% / #{$alpha-line-height} $alpha-font-family;
  // Legacy, needs to be documented.
  // sass-lint:disable no-vendor-prefixes no-misspelled-properties
  -webkit-overflow-scrolling: touch;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  // sass-lint:enable no-vendor-prefixes

  // Why not @mixin font-size?
  @include mq($bp-tablet-l) {
    font-size: $alpha-font-size / 16 * 112.5%;
  }

  #rslightbox_closer {
    transition: none;
  }

  #rslightbox_logo {
    display: none;
  }

  #rslightbox_buttons {
    padding: 0;
    bottom: 10px;
    margin: 2px 10px;
    background-color: transparent;
  }

  .rsform-button,
  #rslightbox_buttons a.rsdialog-button {
    @include btn;
    @include btn--alpha;
    @include btn-m;

    @include mq($bp-tablet-s) {
      @include btn-inlineblock;
    }

    background-image: none;
  }

  #rslightbox_content {
    @include border-box;

    font-size: inherit;
    top: 10px;
    background-color: $white-color !important;
    color: $alpha-text-color;

    h1 {
      @include h1;
      margin-bottom: .5rem;
    }

    h2 {
      @include h2;
      padding-top: 0;
    }

    fieldset {
      border: 0;
      margin-bottom: 0;
      background-color: transparent;
    }

    legend {
      border: 0;
      font-weight: bold;
      margin: 0;
      padding: 0;
      background-color: transparent;
    }

    .rsform-section > legend {
      @include h2;
      padding-top: .3rem;
    }

    label {
      font-weight: normal;
    }

    .rsform-row {
      @include text-dimensions(0, 1);
      border-radius: $beta-radius;
      background-color: $gamma-ui-color;
    }

    .rsform-info-container {
      @include text-dimensions(0, 1);
    }

    input[type='button'] {
      @include text-dimensions(0, 1);
    }

    .rsform-colorlist-style-none,
    .rsform-colorlist-style-underline {
      line-height: .2rem;
    }
  }
}

.large-header .rsbtn_gent {
  border-radius: $beta-radius $beta-radius 0 0;

  .rsbutton {
    border-radius: $beta-radius $beta-radius 0 0;

    &.rsbtn_closer {
      border: 0;

      &::before {
        margin-top: 6px;
      }
    }
  }
}

html.svg {
  .rsbtn_progress_handle.rsimg {
    background-image: url('#{$base-theme-path}/img/svg/rs-handle.svg');
  }
}
