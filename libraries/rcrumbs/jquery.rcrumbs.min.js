!function(i,s,t,e){"use strict";function r(s,t){this.element=s,this.$element=i(s),this.options=i.extend(!0,{},o,t),this._defaults=o,this._name=n,r.prototype.plugin=this,this._init()}var n="rcrumbs",o={version:"@@version",callback:{preCrumbsListDisplay:i.noop,preCrumbDisplay:i.noop,postCrumbsListDisplay:i.noop,postCrumbDisplay:i.noop},ellipsis:!0,windowResize:!0,nbUncollapsableCrumbs:2,nbFixedCrumbs:0,animation:{activated:!0,speed:400}};r.prototype={version:function(){return this.options.version},_init:function(){if(this.$element.hasClass("rcrumbs")||this.$element.addClass("rcrumbs"),this.nbCrumbDisplayed=0,this.$crumbsList=i("ul",this.element),this.$crumbs=i("li",this.$crumbsList),this.$lastCrumb=this.$crumbs.last(),this.reversedCrumbs=i("li",this.$crumbsList).get().reverse(),this.lastNbCrumbDisplayed=0,this.totalCrumbsWidth=0,this.fixedCrumbsWidth=0,this._initCrumbs(),this.options.nbFixedCrumbs>0){var s=this.$crumbs.length;this.$crumbs=i("li",this.$crumbsList).slice(this.options.nbFixedCrumbs,s),this.reversedCrumbs=i("li",this.$crumbsList).slice(this.options.nbFixedCrumbs,s).get().reverse();var t=this;i("li",this.$crumbsList).slice(0,this.options.nbFixedCrumbs).each(function(s,e){t.totalCrumbsWidth+=i(e).data("width"),i(e).addClass("show")})}this._showOrHideCrumbsList(!0),this.options.windowResize&&this._showOrHideCrumbsListOnWindowResize()},_getHiddenElWidth:function(s){var t,e=i(s).clone(!1);return e.css({visibility:"hidden",position:"absolute"}),e.appendTo(this.$crumbsList),t=e.outerWidth(!0),e.remove(),t},_initCrumbs:function(){var s=this;i(this.$crumbsList).contents().filter(function(){return 3===this.nodeType}).remove(),i.each(this.$crumbs,function(){var t=i(this);s._storeCrumbWidth(t)}),this.options.nbFixedCrumbs>0&&i(this.$crumbs).slice(0,this.options.nbFixedCrumbs).each(function(t,e){s.fixedCrumbsWidth+=i(e).data("width")})},_storeCrumbWidth:function(i){var s=this._getHiddenElWidth(i);return i.data("width",s),s},_showOrHideCrumbsList:function(s){var t=this;this.remainingSpaceToDisplayCrumbs=this.$element.width(),this.nbCrumbDisplayed=0,this.totalCrumbsWidth=0,this.options.nbFixedCrumbs>0&&(this.remainingSpaceToDisplayCrumbs-=this.fixedCrumbsWidth,i("li",this.$crumbsList).slice(0,this.options.nbFixedCrumbs).each(function(s,e){t.totalCrumbsWidth+=i(e).data("width")})),this.nextCrumbToShowWidth=e,this.options.callback.preCrumbsListDisplay(this),i.each(this.reversedCrumbs,function(e){var r=i(this),n=i(t.reversedCrumbs[e+1]);t._showOrHideCrumb(r,n,e,s)}),this.lastNbCrumbDisplayed=this.nbCrumbDisplayed,this.options.callback.postCrumbsListDisplay(this)},_showOrHideCrumb:function(i,s,t,e){function r(){i.addClass("show"),a.lastNbCrumbDisplayed<a.nbCrumbDisplayed+1&&a.options.animation.activated&&!e?(i.width(0),i.animate({width:i.data("width")},a.options.animation.speed,function(){a.options.callback.postCrumbDisplay(i)})):a.options.callback.postCrumbDisplay(i),a.nbCrumbDisplayed+=1}function n(){i.animate({width:0},a.options.animation.speed,function(){i.removeClass("show")})}function o(i){i.css({width:a.remainingSpaceToDisplayCrumbs+i.data("width")+"px"}),i.addClass("ellipsis")}this.options.callback.preCrumbDisplay(i);var a=this;this.remainingSpaceToDisplayCrumbs-=i.data("width"),t<this.options.nbUncollapsableCrumbs?(r(),this.remainingSpaceToDisplayCrumbs<0&&o(this.$lastCrumb),this.totalCrumbsWidth+=i.data("width")):this.remainingSpaceToDisplayCrumbs>=0?(r(),this.totalCrumbsWidth+=i.data("width")):(this.lastNbCrumbDisplayed>this.nbCrumbDisplayed-1&&this.options.animation.activated?n():i.removeClass("show"),this.nextCrumbToShowWidth||(this.nextCrumbToShowWidth=i.data("width")))},_showOrHideCrumbsListOnWindowResize:function(){var t=this;i(s).resize(function(){var s=t.$element.width();(s<t.totalCrumbsWidth||t.totalCrumbsWidth+t.nextCrumbToShowWidth<s)&&(i.each(t.reversedCrumbs,function(){var s=i(this);s.stop(!0,!0)}),t._showOrHideCrumbsList()),s>=t.totalCrumbsWidth&&t.$lastCrumb.hasClass("ellipsis")&&t._disableEllipsis(t.$lastCrumb)})},_disableEllipsis:function(i){i.css({width:"auto"}),i.removeClass("ellipsis")}},i.fn[n]=function(s){if(r.prototype[s]&&-1===s.indexOf("_")){var t=i.data(this[0],"plugin_"+n);if(t)return r.prototype[s].apply(t,Array.prototype.slice.call(arguments,1));i.error("jquery."+n+" plugin must be initialized first on the element")}else{if("object"==typeof s||!s)return this.each(function(){i.data(this,"plugin_"+n)?i.error("jquery."+n+" plugin cannot be instantiated multiple times on same element"):i.data(this,"plugin_"+n,new r(this,s))});i.error("Method "+s+" does not exist on jquery."+n)}}}(jQuery,window,document);
